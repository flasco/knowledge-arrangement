# OSI 七层协议

- 物理层 - 有关传输介质的特性。这些规范通常也参考了其他组织制定的标准。
- 数据链路层 - 它定义了在单个链路上如何传输数据。
- 网络层 - 层对端到端的包传输进行定义，它定义了能够标识所有结点的逻辑地址，还定义了路由实现的方式和学习的方式。
- 传输层 - 这层的功能包括是否选择差错恢复协议还是无差错恢复协议，及在同一主机上对不同应用的数据流的输入进行复用，还包括对收到的顺序不对的数据包的重新排序功能。
- 会话层 - 它定义了如何开始、控制和结束一个会话。
- 表示层 - 这一层的主要功能是定义数据格式及加密。
- 应用层 - 与其它计算机进行通讯的一个应用，它是对应应用程序的通信服务的。

# TCP 三次握手

- 客户端发送请求报文，SYN = 1， seq = x
- 服务器端发送 ACK 报文，SYN = 1，ACK = 1， ack 为 x + 1，seq = y
- 客户端收到之后向服务器给出确认，ACK = 1，seq = x + 1, ack 为 y + 1

seq 全名是 sequence numbers 序列号，因为在协议中的交流是一段一段的，为了防止数据包丢失，需要约定当前的序号是多少，下次希望收到的对方的序号是多少，而三次握手正是为了解决这个问题出现的

第一次，客户端先发送请求报文，标明 SYN = 1，当前的 seq 是从 x 开始发送。
第二次，服务端发送报文，标明 ACK = 1，SYN = 1，seq = y, ack = x + 1，ACK 和 SYN 都是标志位，ACK 标明启用 ack 字段，SYN 则是确认同步，如果 SYN = 0 的话就是拒绝连接。小写的 ack 是希望下一次收到的对方的序号，seq 是目前自己的序号
第三次，客户端发送回应报文，标明 ACK= 1，seq = x + 1, ack + y + 1, seq 是这次的序号，比上次递增了 1，ack 是希望服务器端发送的序号为 y + 1，标明已经收到了 y，下一次请发 y + 1，然后就可以开始交流了。

## 为什么是 3 次握手而不是 2 次或者是 4 次？

信道不可靠, 但是通信双方需要就某个问题达成一致. 而要解决这个问题, 无论你在消息中包含什么信息, 三次通信是理论上的最小值.
