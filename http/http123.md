# http 与 https 的区别

https 走的端口是 443，而 http 走的是 80 端口。http 采用的是 tcp 协议，明文传输，而 https 则是 ssl/tls 加密协议，其作用一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。

https 浏览器会使用公钥加密内容，服务器则是对接收到的请求进行私钥解密，这样安全性比较高，防止信息传输途中被篡改。

# http2.0 的特点

- 服务器端推送，服务器可以对客户端的一个请求发送多个响应。
- 首部压缩，减少体积。 - 两端建一个索引表，发的时候直接发索引的集合即可
- 多路复用，一次 tcp 可以同时发送多个请求。
- 二进制分帧：HTTP2.0 会将所有的传输信息分割为更小的信息或者帧，并对他们进行二进制编码。这样就可以进行乱序发送，而不是串行请求，顺序不需要一一对应，解决了 http 的队首阻塞问题

- http1.0 - 连接无法复用，每次都要三次握手和慢启动
- http1.1 - 默认使用持久连接，避免了连续请求时重复的三次握手

HTTP 耗时 = TCP 握手
HTTPs 耗时 = TCP 握手 + SSL 握手

# http3.0 - QUIC

http2.0 虽然解决了 http 的队首堵塞问题（下一个请求的发送必须等待上一个请求的返回），但是无法解决 tcp 协议的队首堵塞问题，如果一个数据包传输失败，之前传的数据都要重新传。

在 3.0 之前的协议都是基于 TCP 做的，这有个缺点是数据必须要严格按照顺序，如果数据包丢失，就需要重新传（因为 ACK 滑动窗口是累加计数，如果当前的没到，就算后面的到了也会卡在这里）。

而且 TCP 协议是操作系统内核实现的，升级起来非常困难，协议僵化，无法快速迭代。（一个请求会经过很多个网络设备，如果要升级 tcp/创作新的协议，是很难快速生效的）

为了解决 tcp 的痛点，避免协议僵化的问题，只能基于原有的协议进行改造，udp 就成了最佳的选择。

总结 - QUIC 诞生原因：避免协议僵化问题，解决 tcp 的丢包重传堵塞问题

优点：

- 握手次数优化 - 采用 DH 算法，减少建立连接时的握手次数
- 多路复用 - 通过流的方式组织数据包，避免数据丢失引起的整个数据包重传
- 连接迁移 - 采用 uuid 标记连接，在类似手机之类的 ip 发生变动之时，只要 uuid 不变，就不需要重新握手

缺点：

- udp 协议的端口容易被攻击，大部分情况下除了 DNS 的 udp 端口（53），其他都是屏蔽掉的。
- udp 协议的定位问题，很多中间设备对 udp 协议的支持 & 优化不好，丢包可能性比较高

## DNS 的 udp 协议？

dns 原先是用 udp 的，但是因为容易被攻击篡改，后面换成了 tcp，甚至是http/3。

> https://juejin.cn/post/6908522467107536903
