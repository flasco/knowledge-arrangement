# 从输入 url 到浏览器渲染出结果，期间发生了什么？

首先输入 url，浏览器会先检查本地是否有存在缓存，如果强缓存已经过期，就发送请求到远程服务器，这期间会进行 url 到 ip 的解析，需要经过 dns 进行 ip 查询。

查到 ip 之后会发起请求，这里会进行 tcp 三次握手：首先客户端发起 SYN, seq = x 请求，服务端响应 SYN + ACK=1，ack = x + 1，seq = y，随后客户端响应 ACK = 1, seq = x + 1, ack = y + 1，自此完成三次握手，成功建联，主要是确认双方的序号是否符合要求，比如服务器端的 seq 以及客户端的 ack，确认无丢包的情况。

- -> SYN = 1, seq = x
- <- ACK + SYN = 1, ack = x + 1, seq = y
- -> ACK = 1, seq = x + 1, ack = y + 1

> seq 是当前端的序号，ack 是下一次希望收到的信号

建联之后服务器接收到客户端的请求信息，返回响应报文，其中包含一个重要的信息 - 状态码，200 是请求成功，301 是请求重定向，304 是协商缓存，又分 LastModified 与 ETag，LastModified 是文件修改时间，没变动就读本地缓存，ETag 是文件哈希值，没变动就读本地缓存

请求成功之后服务器会返回相应的 html 文件，随后进行四次挥手断开连接。

首先客户端请求断开连接，进入等待。
服务端回应收到信号，继续发送还在传输的数据。
服务端发完之后发送断开信号。
客户端收到断开的信号之后确认断开连接。

浏览器解析文本生成对应的 DOM 树 + CSSOM 树，加载 javascript，最终合并生成 render tree，根据节点生成对应图层，合并图层，绘制生成页面。

> https://juejin.cn/post/6844904114506170381
